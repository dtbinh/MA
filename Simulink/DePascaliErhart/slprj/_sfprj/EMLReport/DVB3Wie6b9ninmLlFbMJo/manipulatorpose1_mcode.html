<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type0" id="S2T0U3">x_d</span> = manipulatorpose(<span class="var type1" id="S3T1U6">p_do</span>,<span class="var type1" id="S4T2U7">q_do</span>,<span class="var type1" id="S5T3U8">r</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="var type0" id="S2T0U11">x_d</span> = [<span class="var type1" id="S3T1U15">p_do</span>+quatmultiply(<span class="message error" id="M1F1C">quatconj(<span class="var type1" id="S4T2U20">q_do</span>)</span>,quatmultiply([0;<span class="var type0" id="S5T0U28">r</span>(1:3)],<span class="var type0" id="S4T0U32">q_do</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line">        <span class="var type0" id="S4T0U34">q_do</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line">        <span class="var type0" id="S3T0U37">p_do</span>+quatmultiply(quatconj(<span class="var type0" id="S4T0U42">q_do</span>),quatmultiply([0;<span class="var type0" id="S5T0U50">r</span>(4:6)],<span class="var type0" id="S4T0U54">q_do</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line">        <span class="var type0" id="S4T0U56">q_do</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">        <span class="var type0" id="S3T0U59">p_do</span>+quatmultiply(quatconj(<span class="var type0" id="S4T0U64">q_do</span>),quatmultiply([0;<span class="var type0" id="S5T0U72">r</span>(7:9)],<span class="var type0" id="S4T0U76">q_do</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">        <span class="var type0" id="S4T0U78">q_do</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line">        <span class="var type0" id="S3T0U81">p_do</span>+quatmultiply(quatconj(<span class="var type0" id="S4T0U86">q_do</span>),quatmultiply([0;<span class="var type0" id="S5T0U94">r</span>(10:12)],<span class="var type0" id="S4T0U98">q_do</span>));</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">        <span class="var type0" id="S4T0U100">q_do</span>];</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">        </span></span>
</pre>
